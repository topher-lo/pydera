<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.9.1" />
<title>getgar.dera API documentation</title>
<meta name="description" content="The `dera` module contains the DERA abstract base class.
DERA&#39;s concrete implementations are associated with different
structured datasets produced …" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>getgar.dera</code></h1>
</header>
<section id="section-intro">
<p>The <code>dera</code> module contains the DERA abstract base class.
DERA's concrete implementations are associated with different
structured datasets produced by the SEC's Divison of Economic
and Risk Analysis. Each concrete class contains methods
to download and process its associated dataset scope.
DERA datasets are released on a quarterly basis.</p>
<p>Supported scopes include:
- Mutual Fund Prospectus Risk / Return Summary</p>
<p>You can find DERA datasets at <a href="https://www.sec.gov/dera/data">https://www.sec.gov/dera/data</a></p>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">&#34;&#34;&#34;
The `dera` module contains the DERA abstract base class.
DERA&#39;s concrete implementations are associated with different 
structured datasets produced by the SEC&#39;s Divison of Economic 
and Risk Analysis. Each concrete class contains methods
to download and process its associated dataset scope.
DERA datasets are released on a quarterly basis.

Supported scopes include: 
    - Mutual Fund Prospectus Risk / Return Summary

You can find DERA datasets at https://www.sec.gov/dera/data
&#34;&#34;&#34;

import sys
import os

from abc import ABC
from abc import abstractmethod

import numpy as np
import pandas as pd 

import tempfile

from urllib import request
import urllib.error as urlerr

from typing import Union
from typing import List

### ABSTRACT BASE CLASS

class DERA(ABC):
    &#34;&#34;&#34;Abstract base class containing methods to 
    download and extract DERA datasets.
    
    Attributes:
        start_date: Union[None, str]
            Optional; if start_year = None, fetches all datasets before end_date.
            Date before which not to fetch reports.

            Date must be written in the format year-quarter, 
            where quarter is one of the following four options:
            &#39;q1&#39;, &#39;q2&#39;, &#39;q3&#39;, &#39;q4&#39;.
                e.g. start_date = &#39;2019-q4&#39;

        end_date: Union[None, str]
            Optional; if end_date = None, feteches all datasets 
            before today (UTC) and after start_end.
            Date after which not to fetch reports.

            Date must be written in the format year-quarter, 
            where quarter is one of the following four options:
            &#39;q1&#39;, &#39;q2&#39;, &#39;q3&#39;, &#39;q4&#39;.
                e.g. start_date = &#39;2019-q4&#39;

        table: str
            Each DERA dataset scope has different tables.
            The DERA class only extracts one type of table 
            from each quarter&#39;s datasets.

        path: str
            Path to store raw, i.e. directly downloaded from 
            SEC website, datasets in.

        _paths: Union[None, List[str]]
            Paths to raw, i.e. directly downloaded from 
            SEC website, datasets.

        _datasets: Union[None, List[pd.DataFrame]]
            DERA datasets downloaded and stored in memory as
            a list of pandas DataFrames.
    &#34;&#34;&#34;
    
    def __init__(self,
                 start_date: Union[None, str],
                 end_date: Union[None, str],
                 table: str,
                 *args, **kwargs
    ) -&gt; None:
        &#34;&#34;&#34;Inits DERA abstract base class&#34;&#34;&#34;
        self.start_date = start_date
        self.end_date = end_date
        self.table = table
        self._paths = None
        self._datasets = None

    @classmethod
    def to_dataframe(cls, path: str, sep=&#39;\t&#39;, table=&#39;sub&#39;, *args, **kwargs):
        &#34;&#34;&#34;Converts and concantenates (along index) all datasets with the same
        fields (i.e. all of the same table type e.g. sub.tsv)
        into a single Pandas DataFrame. Returns DataFrame.

        Args:
            path: str
                Path to datasets.

            sep: 
                Defaults to tab regex deliminator &#39;\t&#39;. 
                Delimiter to use to read datasets. 
                See pandas.read_csv() documentation.

            table:
                DERA table type to convert to DataFrame.
                See corresponding docstring in concrete 
                classes for link to documentation
                of the associated DERA dataset.

        Returns:
            DataFrame of concatenated datasets.

        Raises:


        &#34;&#34;&#34;
        datasets = [pd.read_csv(f&#39;{path}/{f}&#39;, sep) for f in os.listdir(path)]
        return pd.concat(datasets)

    @abstractmethod
    def get(self, path: str, *args, **kwargs):
        &#34;&#34;&#34;Retrieves all datasets between start_date 
        and end_date. Saves 
        &#34;&#34;&#34;

### CONCRETE CLASSES

class MutualFunds(DERA):
    &#34;&#34;&#34;Concrete implementation of DERA.
    Download and process DERA&#39;s &#34;Mutual Fund Prospectus Risk / Return 
    Summary&#34; Datasets.
    
    Datasets are found at:
    https://www.sec.gov/dera/data/mutual-fund-prospectus-risk-return-summary-data-sets
    &#34;&#34;&#34;</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="getgar.dera.DERA"><code class="flex name class">
<span>class <span class="ident">DERA</span></span>
<span>(</span><span>start_date: Union[NoneType, str], end_date: Union[NoneType, str], table: str, *args, **kwargs)</span>
</code></dt>
<dd>
<div class="desc"><p>Abstract base class containing methods to
download and extract DERA datasets.</p>
<h2 id="attributes">Attributes</h2>
<dl>
<dt><strong><code>start_date</code></strong></dt>
<dd>
<p>Union[None, str]
Optional; if start_year = None, fetches all datasets before end_date.
Date before which not to fetch reports.</p>
<p>Date must be written in the format year-quarter,
where quarter is one of the following four options:
'q1', 'q2', 'q3', 'q4'.
e.g. start_date = '2019-q4'</p>
</dd>
<dt><strong><code>end_date</code></strong></dt>
<dd>
<p>Union[None, str]
Optional; if end_date = None, feteches all datasets
before today (UTC) and after start_end.
Date after which not to fetch reports.</p>
<p>Date must be written in the format year-quarter,
where quarter is one of the following four options:
'q1', 'q2', 'q3', 'q4'.
e.g. start_date = '2019-q4'</p>
</dd>
<dt><strong><code>table</code></strong></dt>
<dd>str
Each DERA dataset scope has different tables.
The DERA class only extracts one type of table
from each quarter's datasets.</dd>
<dt><strong><code>path</code></strong></dt>
<dd>str
Path to store raw, i.e. directly downloaded from
SEC website, datasets in.</dd>
<dt><strong><code>_paths</code></strong></dt>
<dd>Union[None, List[str]]
Paths to raw, i.e. directly downloaded from
SEC website, datasets.</dd>
<dt><strong><code>_datasets</code></strong></dt>
<dd>Union[None, List[pd.DataFrame]]
DERA datasets downloaded and stored in memory as
a list of pandas DataFrames.</dd>
</dl>
<p>Inits DERA abstract base class</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class DERA(ABC):
    &#34;&#34;&#34;Abstract base class containing methods to 
    download and extract DERA datasets.
    
    Attributes:
        start_date: Union[None, str]
            Optional; if start_year = None, fetches all datasets before end_date.
            Date before which not to fetch reports.

            Date must be written in the format year-quarter, 
            where quarter is one of the following four options:
            &#39;q1&#39;, &#39;q2&#39;, &#39;q3&#39;, &#39;q4&#39;.
                e.g. start_date = &#39;2019-q4&#39;

        end_date: Union[None, str]
            Optional; if end_date = None, feteches all datasets 
            before today (UTC) and after start_end.
            Date after which not to fetch reports.

            Date must be written in the format year-quarter, 
            where quarter is one of the following four options:
            &#39;q1&#39;, &#39;q2&#39;, &#39;q3&#39;, &#39;q4&#39;.
                e.g. start_date = &#39;2019-q4&#39;

        table: str
            Each DERA dataset scope has different tables.
            The DERA class only extracts one type of table 
            from each quarter&#39;s datasets.

        path: str
            Path to store raw, i.e. directly downloaded from 
            SEC website, datasets in.

        _paths: Union[None, List[str]]
            Paths to raw, i.e. directly downloaded from 
            SEC website, datasets.

        _datasets: Union[None, List[pd.DataFrame]]
            DERA datasets downloaded and stored in memory as
            a list of pandas DataFrames.
    &#34;&#34;&#34;
    
    def __init__(self,
                 start_date: Union[None, str],
                 end_date: Union[None, str],
                 table: str,
                 *args, **kwargs
    ) -&gt; None:
        &#34;&#34;&#34;Inits DERA abstract base class&#34;&#34;&#34;
        self.start_date = start_date
        self.end_date = end_date
        self.table = table
        self._paths = None
        self._datasets = None

    @classmethod
    def to_dataframe(cls, path: str, sep=&#39;\t&#39;, table=&#39;sub&#39;, *args, **kwargs):
        &#34;&#34;&#34;Converts and concantenates (along index) all datasets with the same
        fields (i.e. all of the same table type e.g. sub.tsv)
        into a single Pandas DataFrame. Returns DataFrame.

        Args:
            path: str
                Path to datasets.

            sep: 
                Defaults to tab regex deliminator &#39;\t&#39;. 
                Delimiter to use to read datasets. 
                See pandas.read_csv() documentation.

            table:
                DERA table type to convert to DataFrame.
                See corresponding docstring in concrete 
                classes for link to documentation
                of the associated DERA dataset.

        Returns:
            DataFrame of concatenated datasets.

        Raises:


        &#34;&#34;&#34;
        datasets = [pd.read_csv(f&#39;{path}/{f}&#39;, sep) for f in os.listdir(path)]
        return pd.concat(datasets)

    @abstractmethod
    def get(self, path: str, *args, **kwargs):
        &#34;&#34;&#34;Retrieves all datasets between start_date 
        and end_date. Saves 
        &#34;&#34;&#34;</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li>abc.ABC</li>
</ul>
<h3>Subclasses</h3>
<ul class="hlist">
<li><a title="getgar.dera.MutualFunds" href="#getgar.dera.MutualFunds">MutualFunds</a></li>
</ul>
<h3>Static methods</h3>
<dl>
<dt id="getgar.dera.DERA.to_dataframe"><code class="name flex">
<span>def <span class="ident">to_dataframe</span></span>(<span>path: str, sep='\t', table='sub', *args, **kwargs)</span>
</code></dt>
<dd>
<div class="desc"><p>Converts and concantenates (along index) all datasets with the same
fields (i.e. all of the same table type e.g. sub.tsv)
into a single Pandas DataFrame. Returns DataFrame.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>path</code></strong></dt>
<dd>str
Path to datasets.</dd>
<dt><strong><code>sep</code></strong></dt>
<dd>Defaults to tab regex deliminator '
'.
Delimiter to use to read datasets.
See pandas.read_csv() documentation.</dd>
</dl>
<p>table:
DERA table type to convert to DataFrame.
See corresponding docstring in concrete
classes for link to documentation
of the associated DERA dataset.</p>
<h2 id="returns">Returns</h2>
<p>DataFrame of concatenated datasets.
Raises:</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@classmethod
def to_dataframe(cls, path: str, sep=&#39;\t&#39;, table=&#39;sub&#39;, *args, **kwargs):
    &#34;&#34;&#34;Converts and concantenates (along index) all datasets with the same
    fields (i.e. all of the same table type e.g. sub.tsv)
    into a single Pandas DataFrame. Returns DataFrame.

    Args:
        path: str
            Path to datasets.

        sep: 
            Defaults to tab regex deliminator &#39;\t&#39;. 
            Delimiter to use to read datasets. 
            See pandas.read_csv() documentation.

        table:
            DERA table type to convert to DataFrame.
            See corresponding docstring in concrete 
            classes for link to documentation
            of the associated DERA dataset.

    Returns:
        DataFrame of concatenated datasets.

    Raises:


    &#34;&#34;&#34;
    datasets = [pd.read_csv(f&#39;{path}/{f}&#39;, sep) for f in os.listdir(path)]
    return pd.concat(datasets)</code></pre>
</details>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="getgar.dera.DERA.get"><code class="name flex">
<span>def <span class="ident">get</span></span>(<span>self, path: str, *args, **kwargs)</span>
</code></dt>
<dd>
<div class="desc"><p>Retrieves all datasets between start_date
and end_date. Saves</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@abstractmethod
def get(self, path: str, *args, **kwargs):
    &#34;&#34;&#34;Retrieves all datasets between start_date 
    and end_date. Saves 
    &#34;&#34;&#34;</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="getgar.dera.MutualFunds"><code class="flex name class">
<span>class <span class="ident">MutualFunds</span></span>
<span>(</span><span>start_date: Union[NoneType, str], end_date: Union[NoneType, str], table: str, *args, **kwargs)</span>
</code></dt>
<dd>
<div class="desc"><p>Concrete implementation of DERA.
Download and process DERA's "Mutual Fund Prospectus Risk / Return
Summary" Datasets.</p>
<p>Datasets are found at:
<a href="https://www.sec.gov/dera/data/mutual-fund-prospectus-risk-return-summary-data-sets">https://www.sec.gov/dera/data/mutual-fund-prospectus-risk-return-summary-data-sets</a></p>
<p>Inits DERA abstract base class</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class MutualFunds(DERA):
    &#34;&#34;&#34;Concrete implementation of DERA.
    Download and process DERA&#39;s &#34;Mutual Fund Prospectus Risk / Return 
    Summary&#34; Datasets.
    
    Datasets are found at:
    https://www.sec.gov/dera/data/mutual-fund-prospectus-risk-return-summary-data-sets
    &#34;&#34;&#34;</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="getgar.dera.DERA" href="#getgar.dera.DERA">DERA</a></li>
<li>abc.ABC</li>
</ul>
<h3>Inherited members</h3>
<ul class="hlist">
<li><code><b><a title="getgar.dera.DERA" href="#getgar.dera.DERA">DERA</a></b></code>:
<ul class="hlist">
<li><code><a title="getgar.dera.DERA.get" href="#getgar.dera.DERA.get">get</a></code></li>
<li><code><a title="getgar.dera.DERA.to_dataframe" href="#getgar.dera.DERA.to_dataframe">to_dataframe</a></code></li>
</ul>
</li>
</ul>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="getgar" href="index.html">getgar</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="getgar.dera.DERA" href="#getgar.dera.DERA">DERA</a></code></h4>
<ul class="">
<li><code><a title="getgar.dera.DERA.get" href="#getgar.dera.DERA.get">get</a></code></li>
<li><code><a title="getgar.dera.DERA.to_dataframe" href="#getgar.dera.DERA.to_dataframe">to_dataframe</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="getgar.dera.MutualFunds" href="#getgar.dera.MutualFunds">MutualFunds</a></code></h4>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc"><cite>pdoc</cite> 0.9.1</a>.</p>
</footer>
</body>
</html>